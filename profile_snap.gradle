ext.props = new Properties()

task setEnv {
    def snapFile = new File("src/main/resources/snap.properties")
    snapFile.write("postgresqlUrl=" + System.getenv("SNAP_DB_PG_JDBC_URL") + "\npostgresqlUsername=" + System.getenv("SNAP_DB_PG_USER") + "\npostgresqlPassword=" + System.getenv("SNAP_DB_PG_PASSWORD"))

    props.load(new FileInputStream("src/main/resources/snap.properties"))
}

//This is used in the deploy stage of the snap pipeline to load test data into the staging db
task loadTestData(type: Exec) {
    commandLine 'psql', 'd3a768s9fol73e',
                '-h', 'ec2-54-204-20-209.compute-1.amazonaws.com',
                '-f', "${project.rootDir.absolutePath}/src/test/data/AddTestData.sql",
                '-U', 'vckfhimyuiymcz',
                '-p', '5432',
                '-w'
}